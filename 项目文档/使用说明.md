# XPanel 使用说明

## 项目优化完成 ✅

您的项目已经成功从 `WinFormsApp2` 优化为 `XPanel`，并实现了完整的插件化系统。

## 主要改进

### 1. 项目重命名
- ✅ 项目名称：`WinFormsApp2` → `XPanel`
- ✅ 命名空间：`WinFormsApp2` → `XPanel`
- ✅ 插件命名规范：以 `XPlugin` 开头
- ✅ 插件目录：`XPlugin` 文件夹

### 2. 插件系统增强
- ✅ 新增插件管理面板
- ✅ 支持插件上传安装
- ✅ 支持插件启用/禁用
- ✅ 支持插件卸载
- ✅ 动态菜单更新

### 3. 规范的插件开发模式
- ✅ 标准化插件接口 `IXPanelInterface`
- ✅ 插件命名规范 `XPlugin*.dll`
- ✅ 示例插件 `XPluginSample`

## 如何使用

### 启动程序
1. 运行 `XPanel.exe` 或使用 `dotnet run`
2. 程序将显示新的界面标题："XPanel - 插件化管理面板"

### 插件管理
1. 点击顶部菜单 **"插件"** → **"插件管理"**
2. 在插件管理面板中可以：
   - **上传插件**：选择 `XPlugin*.dll` 文件进行安装
   - **启用/禁用**：控制插件是否在菜单中显示
   - **刷新列表**：重新扫描插件目录
   - **卸载插件**：从系统中移除插件

### 测试示例插件
1. 示例插件已编译完成：`XPluginSample\bin\Debug\net8.0-windows\XPluginSample.dll`
2. 通过插件管理面板上传此文件
3. 上传成功后，在"插件"菜单中会出现"示例插件"选项
4. 点击即可打开示例插件面板

## 插件开发指南

### 创建新插件
1. 创建新的类库项目
2. 项目名称以 `XPlugin` 开头（如：`XPluginMyTool`）
3. 引用 `XPlugin` 项目
4. 实现 `IXPanelInterface` 接口

### 示例代码
```csharp
public class MyPlugin : IXPanelInterface
{
    public string Name => "我的插件";
    
    public UserControl CreatePanel()
    {
        return new MyPanel();
    }
}

public class MyPanel : UserControl
{
    public MyPanel()
    {
        InitializeComponent();
    }
    
    private void InitializeComponent()
    {
        // 设计您的界面
    }
}
```

### 编译和部署
1. 编译项目生成 `XPluginMyTool.dll`
2. 通过主程序的插件管理上传安装
3. 插件将自动出现在菜单中

## 项目结构

```
XPanel/
├── Forms/                  # 主窗体
├── Layout/                 # UI布局管理
├── Panels/                 # 内置面板
│   ├── AboutPanel.cs       # 关于面板
│   ├── SettingsPanel.cs    # 设置面板
│   └── PluginManagerPanel.cs # 插件管理面板
├── Plugins/                # 插件管理
│   ├── PluginLoader.cs     # 插件加载器
│   └── XPluginManager.cs   # 插件管理器
├── Registry/               # 面板注册
├── Tabs/                   # 标签页管理
├── XPlugin/                # 插件接口定义
│   ├── IXPanelInterface.cs # 面板插件接口
│   ├── IServerPlugin.cs    # 服务插件接口
│   └── logs/               # 日志工具
├── XPluginSample/          # 示例插件
└── XPlugin/                # 运行时插件目录（自动创建）
```

## 技术特性

- **框架**：.NET 8.0 + WinForms
- **插件系统**：基于反射的动态加载
- **界面管理**：TabControl + MenuStrip
- **插件存储**：XPlugin 文件夹
- **命名规范**：XPlugin 前缀

## 下一步扩展

系统已为进一步扩展做好准备：
- 插件配置管理
- 插件依赖管理
- 插件版本控制
- 插件市场集成
- 远程插件下载

## 注意事项

1. 插件文件名必须以 `XPlugin` 开头
2. 插件需要引用 `XPlugin` 项目
3. 插件卸载后建议重启程序以完全释放资源
4. 建议在开发插件时遵循单一职责原则

---

**恭喜！您的 XPanel 插件化管理面板已经准备就绪！** 🎉
